# ğŸ¯ AI ê¸°ë°˜ í™ˆì‡¼í•‘ ë°©ì†¡ í¸ì„± ì¶”ì²œ ì‹œìŠ¤í…œ

**ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë¶„ì„**ê³¼ **XGBoost ë§¤ì¶œ ì˜ˆì¸¡**ì„ ê²°í•©í•œ AI ë°©ì†¡ í¸ì„± ì¶”ì²œ ì‹œìŠ¤í…œ

> **ìµœì‹  ì—…ë°ì´íŠ¸ (2025-11-10):** ë„¤ì´ë²„ ë² ìŠ¤íŠ¸ ìƒí’ˆ ìë™ í¬ë¡¤ë§ ì¶”ê°€, ì™¸ë¶€ ìƒí’ˆ API í†µí•©, AI ì¶”ì²œ ê·¼ê±° ìƒì„± ê³ ë„í™”

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
3. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
4. [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
5. [ì‹œì‘í•˜ê¸°](#-ì‹œì‘í•˜ê¸°)
6. [API ëª…ì„¸](#-api-ëª…ì„¸)
7. [ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°](#-ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¡°)
8. [n8n ì›Œí¬í”Œë¡œìš°](#-n8n-ì›Œí¬í”Œë¡œìš°)
9. [ì™¸ë¶€ ìƒí’ˆ API](#-ì™¸ë¶€-ìƒí’ˆ-api)

---

## ğŸ’¡ í”„ë¡œì íŠ¸ ê°œìš”

### ë¬´ì—‡ì„ í•˜ëŠ” ì‹œìŠ¤í…œì¸ê°€ìš”?

í™ˆì‡¼í•‘ PDê°€ ë°©ì†¡ í¸ì„±í‘œì—ì„œ **ë¹ˆ ì‹œê°„ëŒ€**ë¥¼ ë°œê²¬í•˜ë©´, AIê°€ í•´ë‹¹ ì‹œê°„ëŒ€ì— **ìµœì ì˜ ìƒí’ˆ**ì„ ì¶”ì²œí•´ì¤ë‹ˆë‹¤.

**ì¶”ì²œ ê·¼ê±°:**
- ğŸŒ¡ï¸ **ë‚ ì”¨ ë°ì´í„°**: ë¹„ì˜¤ëŠ” ë‚ ì—ëŠ” ì‹¤ë‚´ìš©í’ˆ, ë”ìš´ ë‚ ì—ëŠ” ëƒ‰ë°©ìš©í’ˆ
- ğŸ“ˆ **ê³¼ê±° ë§¤ì¶œ ë°ì´í„°**: XGBoost ëª¨ë¸ë¡œ ë§¤ì¶œ ì˜ˆì¸¡
- ğŸ¬ **ë°©ì†¡í…Œì´í”„ ì¤€ë¹„ ìƒíƒœ**: ì¦‰ì‹œ ë°©ì†¡ ê°€ëŠ¥í•œ ìƒí’ˆë§Œ ì¶”ì²œ
- ğŸ”¥ **íŠ¸ë Œë“œ í‚¤ì›Œë“œ**: ì‹¤ì‹œê°„ ì¸ê¸° í‚¤ì›Œë“œì™€ ì—°ê´€ëœ ìƒí’ˆ
- â° **ì‹œê°„ëŒ€ ë¶„ì„**: ì €ë…ì—ëŠ” ì£¼ë°©ìš©í’ˆ, ì‹¬ì•¼ì—ëŠ” ê±´ê°•ì‹í’ˆ

### ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

```
1. PDê°€ ë°©ì†¡ í¸ì„±í‘œì—ì„œ ë¹ˆ ì‹œê°„ëŒ€ ë°œê²¬
   â†“
2. 'AI ì¶”ì²œ' ë²„íŠ¼ í´ë¦­
   â†“
3. AIê°€ í•´ë‹¹ ì‹œê°„ëŒ€ì— ìµœì ì˜ ìƒí’ˆ 5~10ê°œ ì¶”ì²œ
   â†“
4. PDê°€ ì¶”ì²œ ê·¼ê±°ë¥¼ í™•ì¸í•˜ê³  ìµœì¢… ì„ íƒ
   â†“
5. ì„ íƒí•œ ìƒí’ˆì„ í¸ì„±í‘œì— ì¶”ê°€
```

---

## âš¡ ì£¼ìš” ê¸°ëŠ¥

### 1. AI í•˜ì´ë¸Œë¦¬ë“œ ì¶”ì²œ ì—”ì§„ (RAG + XGBoost)
- **RAG (ê²€ìƒ‰ì¦ê°•ìƒì„±)**:
  - OpenAI ì„ë² ë”©ìœ¼ë¡œ ìƒí’ˆ ë°ì´í„°ë¥¼ 768ì°¨ì› ë²¡í„°ë¡œ ë³€í™˜
  - Qdrant ë²¡í„° DB ê¸°ë°˜ ìœ ì‚¬ë„ ê²€ìƒ‰ (ê²€ìƒ‰ ì†ë„ 10ë°° í–¥ìƒ)
  - ë²¡í„° ìœ ì‚¬ë„ ê¸°ë°˜ ìƒí’ˆ ë§¤ì¹­ ë° íë ˆì´ì…˜

- **XGBoost ë§¤ì¶œ ì˜ˆì¸¡**:
  - ê³¼ê±° ë°©ì†¡ ë°ì´í„° í•™ìŠµ (ìƒí’ˆ, ì‹œê°„ëŒ€, ì¹´í…Œê³ ë¦¬, ë‚ ì”¨ ë³€ìˆ˜)
  - í¸ì„± ì˜ˆì • ìƒí’ˆì˜ ì˜ˆìƒ ë§¤ì¶œ ì‚°ì¶œ
  - ì‹œê°„ëŒ€ë³„ ìµœì  ìƒí’ˆ ì¶”ì²œ (ì˜¤ì „/ì˜¤í›„/ì €ë…)
  - ë°°ì¹˜ ì˜ˆì¸¡ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™” (ìµœëŒ€ 30ê°œ ë™ì‹œ ì²˜ë¦¬)

- **í•˜ì´ë¸Œë¦¬ë“œ ì¶”ì²œ ë¡œì§**:
  ```
  ìµœì¢… ì ìˆ˜ = (ìœ ì‚¬ë„ ì ìˆ˜ Ã— ê°€ì¤‘ì¹˜1) + (XGBoost ë§¤ì¶œ ì˜ˆì¸¡ Ã— ê°€ì¤‘ì¹˜2)
  ```
  - ê°€ì¤‘ì¹˜ ì¡°ì • ê°€ëŠ¥ (API íŒŒë¼ë¯¸í„°ë¡œ ì œì–´)
  - ê³ ìœ ì‚¬ë„: ìœ ì‚¬ë„ 70% + ë§¤ì¶œ 30% (íŠ¸ë Œë“œ ë°˜ì˜)
  - ì €ìœ ì‚¬ë„: ìœ ì‚¬ë„ 30% + ë§¤ì¶œ 70% (ì•ˆì •ì  ë§¤ì¶œ)

### 2. LangChain ê¸°ë°˜ ë™ì  ì¶”ì²œ ê·¼ê±° ìƒì„±
- **GPT-4o-mini ëª¨ë¸**: ìƒí’ˆë³„ ë§ì¶¤ ì¶”ì²œ ì´ìœ  ìë™ ì‘ì„±
- **ë‹¤ì–‘í•œ ìš”ì†Œ ë°˜ì˜**: ì˜ˆì¸¡ ë§¤ì¶œ, ì‹œê°„ëŒ€, ì¹´í…Œê³ ë¦¬, ê³µíœ´ì¼, ë‚ ì”¨/ê³„ì ˆ
- **100ì ì´ë‚´ ê°„ê²°í•œ ê·¼ê±°**: PDê°€ ë¹ ë¥´ê²Œ ì´í•´í•  ìˆ˜ ìˆëŠ” ì„¤ë“ë ¥ ìˆëŠ” ë¬¸ì¥
- **ì˜ˆì‹œ**: "ì €ë… ì‹œê°„ëŒ€ì— ìµœì í™”ëœ ì£¼ë°©ìš©í’ˆìœ¼ë¡œ, ê³¼ê±° íŒ¨í„´ ë¶„ì„ ê²°ê³¼ 8,500ë§Œì›ì˜ ë§¤ì¶œì´ ì˜ˆìƒë©ë‹ˆë‹¤."

### 3. ìµœê·¼ ë°©ì†¡ ì‹¤ì  ì¡°íšŒ (Netezza ì—°ë™)
- **ì‹¤ì‹œê°„ ì‹¤ì  ì¡°íšŒ**: ë°©ì†¡í…Œì´í”„ ì½”ë“œë¡œ ìµœê·¼ ë°©ì†¡ ì‹¤ì  ìë™ ì¡°íšŒ
- **ë°°ì¹˜ ì²˜ë¦¬**: ì—¬ëŸ¬ ìƒí’ˆì˜ ì‹¤ì ì„ í•œ ë²ˆì— ì¡°íšŒ (ì„±ëŠ¥ ìµœì í™”)
- **8ê°œ í•„ë“œ ì œê³µ**:
  - ë°©ì†¡ì‹œì‘ì¼ì‹œ, ì£¼ë¬¸ìˆ˜ëŸ‰, ë§¤ì¶œì´ì´ìµ(ì‹¤ì )
  - ONAIRë§¤ì¶œì´ì´ìµ(íš¨ìœ¨), í™˜ì‚°ê°€ì¹˜ê°’, ì ìš©ì „í™˜ìœ¨
  - ì‹¤ì§ˆìˆ˜ìˆ˜ë£Œ, í˜¼í•©ìˆ˜ìˆ˜ë£Œ
- **AI ì˜ˆì¸¡ vs ì‹¤ì œ ë¹„êµ**: PDê°€ AI ì˜ˆì¸¡ ë§¤ì¶œê³¼ ì‹¤ì œ ìµœê·¼ ë°©ì†¡ ë§¤ì¶œì„ ë¹„êµí•˜ì—¬ ì˜ì‚¬ê²°ì •

### 4. ë„¤ì´ë²„ ë² ìŠ¤íŠ¸ ìƒí’ˆ ìë™ í¬ë¡¤ë§
- **n8n ì›Œí¬í”Œë¡œìš°**: ë§¤ì¼ ìƒˆë²½ 2ì‹œ ìë™ ì‹¤í–‰
- **TOP 20 ìƒí’ˆ ìˆ˜ì§‘**: ìˆœìœ„, ê°€ê²©, ë¦¬ë·°, ë°°ì†¡ ì •ë³´ ë“± 20ê°œ í•„ë“œ
- **ì¼ë³„ ì´ë ¥ ê´€ë¦¬**: PostgreSQLì— ë‚ ì§œë³„ ì €ì¥
- **ìˆœìœ„ ë³€ë™ ì¶”ì **: ì „ì¼ ëŒ€ë¹„ ìƒìŠ¹/í•˜ë½/ì‹ ê·œ ì§„ì… í‘œì‹œ
- **ì™¸ë¶€ íŠ¸ë Œë“œ ì°¸ê³ **: ë‚´ë¶€ AI ì¶”ì²œ + ì™¸ë¶€ ë² ìŠ¤íŠ¸ ìƒí’ˆ ë™ì‹œ ì œê³µ

### 5. ë°©ì†¡í…Œì´í”„ í•„í„°ë§
- **TAIPGMTAPE í…Œì´ë¸”**: ë°©ì†¡í…Œì´í”„ ì œì‘ ìƒíƒœ ê´€ë¦¬
- **production_status='ready'**: ì¦‰ì‹œ ë°©ì†¡ ê°€ëŠ¥í•œ ìƒí’ˆë§Œ ì¶”ì²œ
- **INNER JOIN**: ë°©ì†¡í…Œì´í”„ê°€ ì—†ëŠ” ìƒí’ˆì€ ìë™ ì œì™¸

### 6. ì‚¬ìš©ì ì •ì˜ ê°€ì¤‘ì¹˜ ì‹œìŠ¤í…œ
API ìš”ì²­ ì‹œ íŠ¸ë Œë“œì™€ ë§¤ì¶œ ì˜ˆì¸¡ì˜ ë¹„ìœ¨ì„ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
# ìš”ì²­ ì˜ˆì‹œ
{
  "trendWeight": 0.3,  # íŠ¸ë Œë“œ 30%
  "salesWeight": 0.7   # ë§¤ì¶œ ì˜ˆì¸¡ 70%
}

# ê°€ì¤‘ì¹˜ ì ìš©
- íŠ¸ë Œë“œ ì¤‘ì‹¬ (0.7, 0.3): ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë°˜ì˜ ê·¹ëŒ€í™”
- ê· í˜• (0.5, 0.5): íŠ¸ë Œë“œì™€ ë§¤ì¶œ ì˜ˆì¸¡ ê· í˜•
- ë§¤ì¶œ ì¤‘ì‹¬ (0.3, 0.7): ì•ˆì •ì  ë§¤ì¶œ ì˜ˆì¸¡ ìš°ì„  (ê¸°ë³¸ê°’)
```

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend (Next.js)                  â”‚
â”‚                      http://localhost:3001                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP Request
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend API (FastAPI)                    â”‚
â”‚                      http://localhost:8501                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  broadcast_workflow.py (í•µì‹¬ ì¶”ì²œ ë¡œì§)              â”‚  â”‚
â”‚  â”‚  - ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘ (ë‚ ì”¨, ì‹œê°„ëŒ€, ê³µíœ´ì¼)              â”‚  â”‚
â”‚  â”‚  - íŠ¸ë Œë“œ í‚¤ì›Œë“œ ìƒì„± (LangChain)                   â”‚  â”‚
â”‚  â”‚  - Qdrant ë²¡í„° ê²€ìƒ‰                                  â”‚  â”‚
â”‚  â”‚  - XGBoost ë°°ì¹˜ ì˜ˆì¸¡                                 â”‚  â”‚
â”‚  â”‚  - ì¶”ì²œ ê·¼ê±° ìƒì„± (LangChain)                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚             â”‚             â”‚             â”‚
    â†“             â†“             â†“             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Qdrant  â”‚  â”‚PostgreSQLâ”‚  â”‚ OpenAI   â”‚  â”‚  n8n     â”‚
â”‚Vector  â”‚  â”‚  (RDB)   â”‚  â”‚   API    â”‚  â”‚(Workflow)â”‚
â”‚  DB    â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚
â”‚:6333   â”‚  â”‚  :5432   â”‚  â”‚          â”‚  â”‚  :5678   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” êµ¬ì„±ìš”ì†Œ

| êµ¬ì„±ìš”ì†Œ | ì—­í•  | í¬íŠ¸ |
|---------|------|------|
| **FastAPI Backend** | AI ì¶”ì²œ API ì„œë²„ | 8501 |
| **Next.js Frontend** | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ | 3001 |
| **PostgreSQL** | ìƒí’ˆ/ë§¤ì¶œ/ë°©ì†¡ ë°ì´í„° ì €ì¥ | 5432 |
| **Qdrant** | ìƒí’ˆ ì„ë² ë”© ë²¡í„° ì €ì¥ | 6333 |
| **n8n** | ë‚ ì”¨ ìˆ˜ì§‘ ìë™í™” ì›Œí¬í”Œë¡œìš° | 5678 |
| **OpenAI API** | ì„ë² ë”© ìƒì„±, LLM ì¶”ë¡  | - |

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

| **êµ¬ë¶„** | **ê¸°ìˆ /ë„êµ¬** | **ì—­í• ** | **ì£¼ìš” ê¸°ëŠ¥** |
|---------|-------------|---------|-------------|
| **AI/ML ì—”ì§„** | OpenAI API | ì„ë² ë”© ìƒì„± | ìƒí’ˆ ë°ì´í„°ë¥¼ 768ì°¨ì› ë²¡í„°ë¡œ ë³€í™˜ |
| | Qdrant | ë²¡í„° DB | ìƒí’ˆ ì„ë² ë”© ì €ì¥ ë° ìœ ì‚¬ë„ ê²€ìƒ‰ (10ë°° ì†ë„ í–¥ìƒ) |
| | XGBoost | ë§¤ì¶œ ì˜ˆì¸¡ | ê³¼ê±° ë°©ì†¡ ë°ì´í„° í•™ìŠµ, ì‹œê°„ëŒ€ë³„ ë§¤ì¶œ ì˜ˆì¸¡ |
| | LangChain | ê·¼ê±° ìƒì„± | GPT-4o-mini ê¸°ë°˜ ì¶”ì²œ ì´ìœ  ìë™ ì‘ì„± (100ì ì´ë‚´) |
| **ë°±ì—”ë“œ** | FastAPI | API ì„œë²„ | ë¹„ë™ê¸° ì²˜ë¦¬ ê¸°ë°˜ ì¶”ì²œ ì—”ì§„ (3ì´ˆ ì´ë‚´ ì‘ë‹µ) |
| | PostgreSQL | ë°ì´í„°ë² ì´ìŠ¤ | ë°©ì†¡/ë§¤ì¶œ ì´ë ¥, ì™¸ë¶€ ìƒí’ˆ ì •ë³´ ê´€ë¦¬ |
| | Python 3.11 | ê°œë°œ ì–¸ì–´ | ë¹„ë™ê¸° ì²˜ë¦¬, ë°ì´í„° ë¶„ì„ |
| **í”„ë¡ íŠ¸ì—”ë“œ** | Next.js | ì›¹ í”„ë ˆì„ì›Œí¬ | ì‹¤ì‹œê°„ ì¶”ì²œ ê²°ê³¼ ì‹œê°í™” |
| | React | UI ë¼ì´ë¸ŒëŸ¬ë¦¬ | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ |
| | TypeScript | ê°œë°œ ì–¸ì–´ | íƒ€ì… ì•ˆì •ì„± ë³´ì¥ |
| **ìë™í™”** | n8n | ì›Œí¬í”Œë¡œìš° ì—”ì§„ | ë„¤ì´ë²„ ë² ìŠ¤íŠ¸ ìƒí’ˆ ìë™ í¬ë¡¤ë§ (ë§¤ì¼ ìƒˆë²½ 2ì‹œ) |
| **ì¸í”„ë¼** | Docker | ì»¨í…Œì´ë„ˆí™” | ê° ì„œë¹„ìŠ¤ ë…ë¦½ ìš´ì˜ ë° ë°°í¬ |
| | Docker Compose | ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ | ë©€í‹° ì»¨í…Œì´ë„ˆ í†µí•© ê´€ë¦¬ |

### ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

| **ì»´í¬ë„ŒíŠ¸** | **í¬íŠ¸** | **ìš©ë„** |
|------------|---------|----------|
| FastAPI Backend | 8501 | ì¶”ì²œ API ì„œë²„ |
| Next.js Frontend | 3001 | ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ |
| Qdrant Vector DB | 6333 | ë²¡í„° ê²€ìƒ‰ ì—”ì§„ |
| PostgreSQL | 5432 | ë°ì´í„° ì €ì¥ì†Œ |
| n8n Workflow | 5678 | ìë™í™” ì›Œí¬í”Œë¡œìš° |

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### ì‚¬ì „ ì¤€ë¹„
- Docker & Docker Compose
- OpenAI API Key
- (ì„ íƒ) OpenWeatherMap API Key

### 1. ì €ì¥ì†Œ ë³µì œ
```bash
git clone https://github.com/your-repo/trnAi.git
cd trnAi
```

### 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
`backend/.env` íŒŒì¼ ìƒì„±:
```env
# Database
POSTGRES_URI=postgresql://TRN_AI:TRN_AI_PASSWORD@postgres:5432/TRNAI_DB

# OpenAI
OPENAI_API_KEY=your_openai_api_key_here

# Qdrant
QDRANT_HOST=qdrant
QDRANT_PORT=6333

# OpenWeatherMap (ì„ íƒ)
OPENWEATHER_API_KEY=your_openweather_api_key
```

### 3. Docker ë„¤íŠ¸ì›Œí¬ ìƒì„±
```bash
docker network create shopping-network
```

### 4. ì„œë¹„ìŠ¤ ì‹¤í–‰
```bash
docker-compose up -d
```

**ì‹¤í–‰ë˜ëŠ” ì„œë¹„ìŠ¤:**
- FastAPI Backend: http://localhost:8501
- Next.js Frontend: http://localhost:3001
- PostgreSQL: localhost:5432
- Qdrant: http://localhost:6333
- n8n: http://localhost:5678

### 5. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
```bash
# í…Œì´ë¸” ìƒì„± (ìë™ ì‹¤í–‰ë¨)
docker exec -it fastapi_backend python app/init_db.py
```

### 6. ìƒí’ˆ ì„ë² ë”© ìƒì„±
```bash
# ë°©ì†¡í…Œì´í”„ ìˆëŠ” ìƒí’ˆë§Œ ì„ë² ë”©
docker exec -it fastapi_backend python app/setup_product_embeddings.py
```

**ì„ë² ë”© ëŒ€ìƒ:**
- TAIGOODS INNER JOIN TAIPGMTAPE
- production_status='ready'ë§Œ í¬í•¨
- í…ìŠ¤íŠ¸: ìƒí’ˆëª… + í…Œì´í”„ëª… + ì¹´í…Œê³ ë¦¬

### 7. XGBoost ëª¨ë¸ í•™ìŠµ
```bash
docker exec -it fastapi_backend python train.py
```

**ìƒì„±ë˜ëŠ” ëª¨ë¸:**
- `xgb_broadcast_profit.joblib` - ë§¤ì¶œì´ì´ìµ ì˜ˆì¸¡ (ì‚¬ìš© ì¤‘)
- `xgb_broadcast_efficiency.joblib` - ë§¤ì¶œíš¨ìœ¨ ì˜ˆì¸¡ (ë¯¸ì‚¬ìš©)

### 8. API í…ŒìŠ¤íŠ¸
```bash
curl -X POST http://localhost:8501/api/v1/broadcast/recommendations \
  -H "Content-Type: application/json" \
  -d '{
    "broadcastTime": "2025-10-17T22:00:00+09:00",
    "recommendationCount": 5
  }'
```

---

## ğŸ“¡ API ëª…ì„¸

### POST `/api/v1/broadcast/recommendations`
ë°©ì†¡ ì‹œê°„ëŒ€ì— ìµœì ì˜ ìƒí’ˆ ì¶”ì²œ

#### Request
```json
{
  "broadcastTime": "2025-10-17T22:00:00+09:00",
  "recommendationCount": 5,
  "trendWeight": 0.3,  // íŠ¸ë Œë“œ ê°€ì¤‘ì¹˜ (ê¸°ë³¸ê°’ 0.3)
  "salesWeight": 0.7   // ë§¤ì¶œ ì˜ˆì¸¡ ê°€ì¤‘ì¹˜ (ê¸°ë³¸ê°’ 0.7)
  // ì£¼ì˜: trendWeight + salesWeight = 1.0 ì´ì–´ì•¼ í•¨
}
```

#### Response (200 OK)
```json
{
  "requestTime": "2025-10-17T14:30:00+09:00",
  "recommendedCategories": [
    {
      "rank": 1,
      "name": "ì£¼ë°©ìš©í’ˆ",
      "reason": "ì €ë… ì‹œê°„ëŒ€ ìµœì  ì¹´í…Œê³ ë¦¬",
      "predictedSales": "8.5ì–µ"
    }
  ],
  "recommendations": [
    {
      "rank": 1,
      "productInfo": {
        "productId": "11388995",
        "productName": "[í•´í”¼ì½œ] ë‹¤ì´ì•„ëª¬ë“œ í”„ë¼ì´íŒ¬ 3ì¢… ì„¸íŠ¸",
        "category": "ìƒí™œ > ì£¼ë°©ìš©í’ˆ",
        "brand": "í•´í”¼ì½œ",
        "price": 99000.0,
        "tapeCode": "T001",
        "tapeName": "ë‹¤ì´ì•„ëª¬ë“œ í”„ë¼ì´íŒ¬ ë°©ì†¡í…Œì´í”„"
      },
      "reasoning": {
        "summary": "ì €ë… ì‹œê°„ëŒ€ì— ìµœì í™”ëœ ì£¼ë°©ìš©í’ˆìœ¼ë¡œ, ê³¼ê±° íŒ¨í„´ ë¶„ì„ ê²°ê³¼ 8,500ë§Œì›ì˜ ë§¤ì¶œì´ ì˜ˆìƒë©ë‹ˆë‹¤.",
        "linkedCategories": ["ì£¼ë°©ìš©í’ˆ"],
        "matchedKeywords": ["ìš”ë¦¬", "ì €ë…ì‹ì‚¬"]
      },
      "businessMetrics": {
        "aiPredictedSales": "8,948.1ë§Œì›",  // AI ì˜ˆì¸¡ ë§¤ì¶œ (XGBoost, ì†Œìˆ˜ì  1ìë¦¬)
        "predictionConfidence": "ë‚®ìŒ (ê³¼ëŒ€ì˜ˆì¸¡)",  // ì˜ˆì¸¡ ì‹ ë¢°ë„
        "marginRate": 0.35,
        "stockLevel": "High",
        "lastBroadcast": {  // ìµœê·¼ ë°©ì†¡ ì‹¤ì  (Netezza ì¡°íšŒ)
          "broadcastStartTime": "2025-11-10 17:33:07.000000",
          "orderQuantity": 287,
          "totalProfit": 16466355.0,
          "profitEfficiency": 17.3,
          "conversionWorth": 0.95337,
          "conversionRate": 88.19,
          "realFee": 0.0,
          "mixFee": 7500000.0
        }
      },
      "recommendationType": "trend_match"
    }
  ],
  "externalProducts": [  // ë„¤ì´ë²„ ë² ìŠ¤íŠ¸ TOP 20
    {
      "product_id": "86321126899",
      "name": "ì ˆì„ë°°ì¶” ê°•ì›ë„ ê³ ë­ì§€ ê¹€ì¥ë°°ì¶” 20kg",
      "rank": 1,
      "rank_change": null,
      "rank_change_text": "ì‹ ê·œ",
      "sale_price": 59900,
      "discounted_price": 39900,
      "discount_ratio": 33,
      "image_url": "https://shopping-phinf.pstatic.net/...",
      "is_delivery_free": true,
      "cumulation_sale_count": 99999,
      "review_count": 99999,
      "review_score": 4.9,
      "mall_name": "íœ˜íŒŒëŒë†ì›"
    }
  ]
}
```

#### ì‘ë‹µ í•„ë“œ ì„¤ëª…

**recommendationType**: ì¶”ì²œ íƒ€ì…
- `"trend_match"`: íŠ¸ë Œë“œ ì—°ê´€ì„± ë†’ìŒ (ìœ ì‚¬ë„ â‰¥ 0.7)
- `"sales_prediction"`: ë§¤ì¶œ ì˜ˆì¸¡ ê¸°ë°˜ (ìœ ì‚¬ë„ < 0.7)

**aiPredictedSales**: AI ì˜ˆì¸¡ ë§¤ì¶œ (XGBoost ëª¨ë¸)
- ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€ í‘œì‹œ (ì˜ˆ: "8,948.1ë§Œì›")
- ë§Œì› ë‹¨ìœ„ë¡œ ë°˜ì˜¬ë¦¼

**predictionConfidence**: ì˜ˆì¸¡ ì‹ ë¢°ë„ (ì‹¤ì œ ë°ì´í„°ì™€ ë¹„êµ)
- "ë†’ìŒ": AI ì˜ˆì¸¡ê³¼ ì‹¤ì œ ë§¤ì¶œì´ ë¹„ìŠ·í•¨ (0.7~1.5ë°°)
- "ë³´í†µ (ë‹¤ì†Œ ë†’ìŒ)": AIê°€ ë‹¤ì†Œ ë†’ê²Œ ì˜ˆì¸¡ (1.5~3.0ë°°)
- "ë‚®ìŒ (ê³¼ëŒ€ì˜ˆì¸¡)": AIê°€ í¬ê²Œ ê³¼ëŒ€ì˜ˆì¸¡ (3.0ë°° ì´ìƒ)
- "ë³´í†µ (ë‹¤ì†Œ ë‚®ìŒ)": AIê°€ ë‹¤ì†Œ ë‚®ê²Œ ì˜ˆì¸¡ (0.5~0.7ë°°)
- "ë‚®ìŒ (ê³¼ì†Œì˜ˆì¸¡)": AIê°€ í¬ê²Œ ê³¼ì†Œì˜ˆì¸¡ (0.5ë°° ë¯¸ë§Œ)

**lastBroadcast**: ìµœê·¼ ë°©ì†¡ ì‹¤ì  (Netezza ì¡°íšŒ)
- `broadcastStartTime`: ë°©ì†¡ì‹œì‘ì¼ì‹œ
- `orderQuantity`: ì£¼ë¬¸ìˆ˜ëŸ‰
- `totalProfit`: ë§¤ì¶œì´ì´ìµ(ì‹¤ì )
- `profitEfficiency`: ONAIRë§¤ì¶œì´ì´ìµ(íš¨ìœ¨)
- `conversionWorth`: í™˜ì‚°ê°€ì¹˜ê°’(ë¶„ë¦¬ì†¡ì¶œ)
- `conversionRate`: ì ìš©ì „í™˜ìœ¨
- `realFee`: ì‹¤ì§ˆìˆ˜ìˆ˜ë£Œ
- `mixFee`: í˜¼í•©ìˆ˜ìˆ˜ë£Œ

**ì‹¤ì œ API ì‘ë‹µ ì˜ˆì‹œ**: [`docs/API_RESPONSE_EXAMPLE.json`](docs/API_RESPONSE_EXAMPLE.json) ì°¸ê³ 

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ì£¼ìš” í…Œì´ë¸”

#### 1. TAIGOODS (ìƒí’ˆ ë§ˆìŠ¤í„°)
```sql
CREATE TABLE taigoods (
    product_code VARCHAR(50) PRIMARY KEY,
    product_name TEXT,
    category_main_name VARCHAR(100),
    category_middle_name VARCHAR(100),
    category_sub_name VARCHAR(100),
    price DECIMAL(15,2),
    search_keywords TEXT
);
```

#### 2. TAIPGMTAPE (ë°©ì†¡í…Œì´í”„)
```sql
CREATE TABLE taipgmtape (
    tape_code VARCHAR(50) PRIMARY KEY,
    tape_name VARCHAR(200),
    duration_minutes INTEGER,
    product_code VARCHAR(50) REFERENCES taigoods(product_code),
    production_status VARCHAR(20)  -- 'ready', 'in_production', 'archived'
);
```

#### 3. TAIBROADCASTS (ë°©ì†¡ ì´ë ¥)
```sql
CREATE TABLE taibroadcasts (
    broadcast_id SERIAL PRIMARY KEY,
    product_code VARCHAR(50),
    broadcast_timestamp TIMESTAMP,
    actual_sales_amount DECIMAL(15,2),
    gross_profit DECIMAL(15,2)
);
```

#### 4. TAIWEATHER_DAILY (ë‚ ì”¨ ë°ì´í„°)
```sql
CREATE TABLE taiweather_daily (
    weather_date DATE PRIMARY KEY,
    weather VARCHAR(50),
    temperature DECIMAL(5,2),
    precipitation DECIMAL(5,2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 5. BROADCAST_TRAINING_DATASET (XGBoost í•™ìŠµ ë°ì´í„°)
```sql
CREATE TABLE broadcast_training_dataset (
    id SERIAL PRIMARY KEY,
    broadcast_timestamp TIMESTAMP,
    category_name VARCHAR(100),
    day_of_week VARCHAR(20),
    is_holiday INTEGER,
    temperature DECIMAL(5,2),
    actual_sales_amount DECIMAL(15,2),
    gross_profit DECIMAL(15,2)
);
```

---

## ğŸ”„ n8n ì›Œí¬í”Œë¡œìš°

### 1. ë„¤ì´ë²„ ë² ìŠ¤íŠ¸ ìƒí’ˆ í¬ë¡¤ë§ ì›Œí¬í”Œë¡œìš° (ë§¤ì¼ ìƒˆë²½ 2ì‹œ)

**íŒŒì¼:** `n8n_workflows/naver_shopping_crawler_final.json`

**ì›Œí¬í”Œë¡œìš° êµ¬ì¡°:**
```
[Daily 2 AM Trigger]
    â†“
[Call Naver Best API (TOP 20)]
    â†“
[Parse Product Data]
    â†“
[Generate SQL Queries]
    â†“
[UPSERT to PostgreSQL (external_products)]
    â†“
[Log Success]
```

**ìˆ˜ì§‘ ë°ì´í„° (20ê°œ í•„ë“œ):**
- ê¸°ë³¸ ì •ë³´: product_id, name, sale_price, discounted_price, discount_ratio
- ì´ë¯¸ì§€/ë§í¬: image_url, landing_url, mobile_landing_url
- ë°°ì†¡ ì •ë³´: is_delivery_free, delivery_fee, is_today_dispatch
- íŒë§¤ ì •ë³´: is_sold_out, cumulation_sale_count, rank_order
- ë¦¬ë·° ì •ë³´: review_count, review_score, mall_name
- ë©”íƒ€ ì •ë³´: channel_no, landing_service, collected_at, collected_date

**íŠ¹ì§•:**
- **ì¼ë³„ ì´ë ¥ ê´€ë¦¬**: product_id + collected_date ë³µí•© ìœ ë‹ˆí¬ í‚¤
- **UPSERT ë¡œì§**: ì¤‘ë³µ ì‹œ ìë™ ì—…ë°ì´íŠ¸
- **ìˆœìœ„ ë³€ë™ ì¶”ì **: ì „ì¼ ëŒ€ë¹„ ìƒìŠ¹/í•˜ë½ ê³„ì‚° ê°€ëŠ¥

### 2. ë‚ ì”¨ ìˆ˜ì§‘ ì›Œí¬í”Œë¡œìš° (3ì‹œê°„ë§ˆë‹¤)

**íŒŒì¼:** `n8n_workflows/weather_collection_workflow.json`

**ì›Œí¬í”Œë¡œìš° êµ¬ì¡°:**
```
[Every 3 Hours Trigger]
    â†“
[Get Weather from OpenWeatherMap API]
    â†“
[Transform Weather Data]
    â†“
[Save to PostgreSQL (taiweather_daily)]
    â†“
[Log Success]
```

**ìˆ˜ì§‘ ë°ì´í„°:**
- ìœ„ì¹˜: Seoul, KR
- ì˜¨ë„ (Â°C)
- ë‚ ì”¨ ìƒíƒœ (Clear, Rain, Snow ë“±)
- ê°•ìˆ˜ëŸ‰ (mm)

### n8n ì›Œí¬í”Œë¡œìš° ì„¤ì • ë°©ë²•

1. **n8n ì ‘ì†**: http://localhost:5678
2. **ê³„ì • ìƒì„±** (ìµœì´ˆ 1íšŒ)
3. **ì›Œí¬í”Œë¡œìš° Import**:
   - Workflows â†’ Import from File
   - íŒŒì¼ ì„ íƒ: `n8n_workflows/naver_shopping_crawler_final.json` ë˜ëŠ” `weather_collection_workflow.json`
4. **Credentials ì„¤ì •**:
   - **PostgreSQL**:
     - Host: `postgres`
     - Database: `TRNAI_DB`
     - User: `TRN_AI`
     - Password: `TRN_AI_PASSWORD`
     - Port: `5432`
   - **OpenWeatherMap API** (ë‚ ì”¨ ì›Œí¬í”Œë¡œìš°ë§Œ):
     - Type: HTTP Query Auth
     - Parameter Name: `appid`
     - Parameter Value: `YOUR_API_KEY`
5. **ì›Œí¬í”Œë¡œìš° í™œì„±í™”**: Active í† ê¸€ ON

---

## ğŸ›ï¸ ì™¸ë¶€ ìƒí’ˆ API

### GET `/api/v1/broadcast/recommendations`

ë°©ì†¡ ì¶”ì²œ API ì‘ë‹µì— **ì™¸ë¶€ ìƒí’ˆ ì •ë³´**ê°€ í¬í•¨ë©ë‹ˆë‹¤.

#### Response êµ¬ì¡°
```json
{
  "requestTime": "2025-11-10T10:00:00+09:00",
  "recommendedCategories": [...],
  "recommendations": [...],
  "externalProducts": [
    {
      "productId": "12345678",
      "name": "[ë¸Œëœë“œ] ì¸ê¸° ìƒí’ˆëª…",
      "salePrice": 50000,
      "discountedPrice": 35000,
      "discountRatio": 30,
      "imageUrl": "https://...",
      "landingUrl": "https://...",
      "isDeliveryFree": true,
      "deliveryFee": 0,
      "isTodayDispatch": true,
      "isSoldOut": false,
      "cumulationSaleCount": 15234,
      "rankOrder": 1,
      "reviewCount": 1234,
      "reviewScore": 4.8,
      "mallName": "ê³µì‹ ìŠ¤í† ì–´",
      "collectedAt": "2025-11-10T02:00:00+09:00"
    }
  ]
}
```

#### ì™¸ë¶€ ìƒí’ˆ í™œìš© ë°©ë²•

1. **ì‹œì¥ íŠ¸ë Œë“œ íŒŒì•…**: ë„¤ì´ë²„ ë² ìŠ¤íŠ¸ TOP 20 ìƒí’ˆ í™•ì¸
2. **ê°€ê²© ë¹„êµ**: ë‚´ë¶€ ìƒí’ˆê³¼ ì™¸ë¶€ ë² ìŠ¤íŠ¸ ìƒí’ˆ ê°€ê²© ë¹„êµ
3. **ë¦¬ë·° ë¶„ì„**: ë†’ì€ ë¦¬ë·° ì ìˆ˜ ìƒí’ˆ ì°¸ê³ 
4. **ë°°ì†¡ ì¡°ê±´**: ë¬´ë£Œë°°ì†¡, ë‹¹ì¼ë°œì†¡ ì—¬ë¶€ í™•ì¸
5. **íŒë§¤ëŸ‰ ì¶”ì´**: ëˆ„ì  íŒë§¤ëŸ‰ìœ¼ë¡œ ì¸ê¸°ë„ íŒŒì•…

#### ìƒì„¸ ë¬¸ì„œ

- **API ëª…ì„¸**: `docs/EXTERNAL_PRODUCTS_API.md`
- **í”„ë¡ íŠ¸ì—”ë“œ ê°€ì´ë“œ**: `docs/EXTERNAL_PRODUCTS_FRONTEND_GUIDE.md`
- **PD í™œìš© ê°€ì´ë“œ**: `docs/EXTERNAL_PRODUCTS_PD_GUIDE.md`
- **í†µí•© README**: `docs/EXTERNAL_PRODUCTS_README.md`

---