# 방송 편성 추천 API 결과 필드 설명서

> 현업 담당자(PD, 기획자)를 위한 API 응답 필드 설명서

---

## 목차
1. [요청 파라미터](#1-요청-파라미터)
2. [응답 구조](#2-응답-구조)
3. [추천 상품 상세](#3-추천-상품-상세)
4. [외부 상품 (네이버 + 타사)](#4-외부-상품)

---

## 1. 요청 파라미터

| 필드명 | 설명 | 예시 |
|--------|------|------|
| `broadcastTime` | 추천받고자 하는 방송 시간대 | `"2025-12-08T22:00:00+09:00"` |
| `recommendationCount` | 추천 개수 (기본값: 10) | `10` |
| `trendWeight` | 트렌드 가중치 (0.0~1.0) | `0.3` (30%) |
| `sellingWeight` | 매출 예측 가중치 (0.0~1.0) | `0.7` (70%) |

**가중치 설정:**
- 트렌드 중심 (0.7/0.3): 화제성 있는 상품 우선
- 매출 중심 (0.3/0.7): 수익성 높은 상품 우선 (기본값)
- 균형 (0.5/0.5): 트렌드와 매출 균형
- ⚠️ 두 가중치의 합은 1.0이어야 합니다.

---

## 2. 응답 구조

```json
{
  "requestTime": "2025-12-08T20:00:00+09:00",
  "recommendations": [...],
  "competitorProducts": [...]
}
```

| 필드명 | 설명 |
|--------|------|
| `requestTime` | API 호출 시간 |
| `recommendations` | AI 추천 자사 상품 목록 (기본 10개) |
| `competitorProducts` | 네이버 인기 상품 + 타사 편성 통합 (AI 선택 10개) |

---

## 3. 추천 상품 상세

### 3.1 구조

```json
{
  "rank": 1,
  "productInfo": {...},
  "reasoning": "추천 근거 문자열 (100자 이내)",
  "businessMetrics": {...}
}
```

### 3.2 상품 정보 (`productInfo`)

| 필드명 | 설명 | 예시 |
|--------|------|------|
| `productId` | 상품 고유 코드 | `"11388995"` |
| `productName` | 상품명 | `"프리미엄 다이어트 보조제"` |
| `category` | 대분류 카테고리 | `"건강식품"` |
| `categoryMiddle` | 중분류 카테고리 | `"다이어트/건강기능"` |
| `categorySub` | 소분류 카테고리 | `"비타민/미네랄/영양제"` |
| `brand` | 브랜드명 | `"해피콜"` |
| `price` | 판매 가격 (원) | `99000` |
| `tapeCode` | 방송테이프 코드 | `"T001"` |
| `tapeName` | 방송테이프명 | `"프리미엄 다이어트 보조제 방송테이프"` |

**활용 팁:**
- `tapeCode`가 있으면 즉시 방송 가능
- 같은 대분류 카테고리는 최대 4개까지만 추천

---

### 3.3 추천 근거 (`reasoning`)

| 필드명 | 타입 | 설명 |
|--------|------|------|
| `reasoning` | 문자열 | AI가 생성한 추천 근거 (100자 이내) |

**예시:** `"쿠쿠 10인용 밥솥은 대가족을 위한 최적의 선택으로, 저녁 시간대에 2581만원의 매출이 예상됩니다."`

**특징:**
- LLM 배치 처리로 10개 상품 근거를 한 번에 생성
- 예측 매출, 카테고리, 시간대 등 데이터 기반
- 각 상품마다 독창적인 표현 사용

---

### 3.4 비즈니스 지표 (`businessMetrics`)

#### AI 예측 매출

| 필드명 | 설명 | 예시 |
|--------|------|------|
| `aiPredictedSales` | XGBoost 모델 예측 매출 | `"850.0만원"` |

#### 최근 방송 실적 (`lastBroadcast`)

최근 방송 이력이 있을 때만 표시됩니다.

| 필드명 | 설명 |
|--------|------|
| `broadcastStartTime` | 방송 시작 일시 |
| `orderQuantity` | 주문 수량 (개) |
| `totalProfit` | 매출총이익 (원) |
| `profitEfficiency` | ONAIR 매출총이익 효율 |
| `conversionWorth` | 환산가치값 |
| `conversionRate` | 적용 전환율 (%) |
| `realFee` | 실질 수수료 |
| `mixFee` | 혼합 수수료 |

**활용:**
- AI 예측 vs 실제 실적 비교로 AI 정확도 확인
- 최근 실적이 좋으면 재방송 고려
- 전환율이 높으면 구매 의향이 높았던 상품

---

## 4. 외부 상품 (`competitorProducts`)

네이버 인기 상품 + 타사 편성이 통합되어 AI가 10개를 선택합니다.

### 4.1 주요 필드

| 필드명 | 설명 | 예시 |
|--------|------|------|
| `company_name` | 출처 | `"네이버 스토어"`, `"GS홈쇼핑"` |
| `broadcast_title` | 상품/방송 제목 | `"무선 이어폰 블루투스 5.0"` |
| `start_time` | 방송 시작 시간 (타사만) | `"2025-12-08T20:00:00+09:00"` |
| `end_time` | 방송 종료 시간 (타사만) | `"2025-12-08T21:00:00+09:00"` |
| `duration_minutes` | 방송 길이 (분, 타사만) | `60` |
| `category_main` | 대분류 카테고리 | `"생활가전"` |

### 4.2 구분 방법

**네이버 상품:**
- `company_name` = `"네이버 스토어"`
- `start_time`, `end_time`, `duration_minutes`는 null

**타사 편성:**
- `company_name` = 실제 홈쇼핑사명 (GS, 롯데, 현대 등)
- 시간 정보 모두 포함

### 4.3 활용

**네이버 상품:** 현재 시장 트렌드 파악, 유사 카테고리 편성 참고

**타사 편성:** 경쟁사 전략 분석, 중복 편성 회피, 경쟁 강도 파악

---

## 5. FAQ

**Q1. AI 예측 매출은 얼마나 정확한가요?**
- XGBoost 모델이 과거 방송 데이터를 학습하여 예측한 참고 지표입니다.
- `lastBroadcast` 데이터가 있다면 AI 예측과 실제 매출을 비교할 수 있습니다.

**Q2. `lastBroadcast`가 없는 상품은?**
- 최근 방송 이력이 없는 신규 상품이거나 오랜 기간 방송하지 않은 상품입니다.

**Q3. 가중치 설정 방법은?**
- 트렌드 중심 (0.7/0.3): 화제성 중요한 시간대
- 매출 중심 (0.3/0.7): 안정적 수익 중요한 시간대
- 균형 (0.5/0.5): 트렌드와 매출 모두 고려

**Q4. 시즌에 맞지 않는 상품이 추천될 수 있나요?**
- 아니오. AI가 시즌 적합성을 검사합니다.
- 겨울철: 여름 상품 자동 제외 / 여름철: 겨울 상품 자동 제외

**Q5. 같은 카테고리 상품이 너무 많이 나올 수 있나요?**
- 아니오. 같은 대분류 카테고리는 최대 4개까지만 추천됩니다.

---

## 6. 관련 문서

- `docs/FRONTEND_API_GUIDE.md` - 프론트엔드 개발자용 가이드
- `docs/API_RESPONSE_EXAMPLE.json` - 실제 API 응답 예시
