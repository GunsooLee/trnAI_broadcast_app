# 방송 편성 추천 API 결과 필드 설명서 (현업용)

> 이 문서는 API 응답 결과의 각 필드가 무엇을 의미하는지 현업 담당자(PD, 기획자)가 이해할 수 있도록 작성되었습니다.

---

## 📋 목차
1. [요청 파라미터 설명](#1-요청-파라미터-설명)
2. [응답 구조 전체 개요](#2-응답-구조-전체-개요)
3. [추천 상품 상세 설명](#3-추천-상품-상세-설명)
4. [네이버 베스트 상품 설명](#4-네이버-베스트-상품-설명)
5. [경쟁사 편성 상품 설명](#5-경쟁사-편성-상품-설명)

---

## 1. 요청 파라미터 설명

API를 호출할 때 입력하는 값들입니다.

| 필드명 | 한글명 | 설명 | 예시 |
|--------|--------|------|------|
| `broadcastTime` | 방송 시간 | 추천받고자 하는 방송 시간대 | `"2025-11-11T22:00:00+09:00"` |
| `recommendationCount` | 추천 개수 | 몇 개의 상품을 추천받을지 (기본값: 10) | `10` |
| `trendWeight` | 트렌드 가중치 | 트렌드를 얼마나 반영할지 (0.0~1.0) | `0.3` (30%) |
| `sellingWeight` | 매출 가중치 | 매출 예측을 얼마나 반영할지 (0.0~1.0) | `0.7` (70%) |

**💡 가중치 설정 팁:**
- 트렌드 중심: `trendWeight=0.7, sellingWeight=0.3` → 화제성 있는 상품 우선
- 매출 중심: `trendWeight=0.3, sellingWeight=0.7` → 수익성 높은 상품 우선
- 균형: `trendWeight=0.5, sellingWeight=0.5` → 트렌드와 매출 균형
- ⚠️ 두 가중치의 합은 반드시 1.0이어야 합니다.

---

## 2. 응답 구조 전체 개요

```json
{
  "requestTime": "2025-11-19T20:00:00+09:00",
  "recommendations": [...],
  "competitorProducts": [...]
}
```

| 필드명 | 한글명 | 설명 |
|--------|--------|------|
| `requestTime` | 요청 시간 | API를 호출한 시간 |
| `recommendations` | 추천 상품 목록 | AI가 추천한 자사 상품 목록 (기본 10개) |
| `competitorProducts` | 통합 편성 상품 | AI가 선택한 네이버 인기 상품 + 타사 편성 통합 10개 (5:5 비율 유지) |

---

## 3. 추천 상품 상세 설명

### 3.1 전체 구조

```json
{
  "rank": 1,
  "productInfo": {...},
  "reasoning": "추천 근거 문자열 (100자 이내)",
  "businessMetrics": {...}
}
```

### 3.2 기본 정보 (`productInfo`)

| 필드명 | 한글명 | 설명 | 예시 |
|--------|--------|------|------|
| `productId` | 상품 코드 | 상품의 고유 식별 번호 | `"11388995"` |
| `productName` | 상품명 | 상품의 전체 이름 | `"프리미엄 다이어트 보조제"` |
| `category` | 카테고리 | 상품의 대분류 카테고리 | `"건강식품"` |
| `brand` | 브랜드 | 상품 브랜드명 (있는 경우) | `"해피콜"` |
| `price` | 가격 | 상품 판매 가격 (원) | `99000` |
| `tapeCode` | 방송테이프 코드 | 방송테이프 식별 코드 | `"T001"` |
| `tapeName` | 방송테이프명 | 방송테이프 제목 | `"프리미엄 다이어트 보조제 방송테이프"` |

**💡 활용 팁:**
- `tapeCode`가 있으면 방송테이프가 준비되어 있어 즉시 방송 가능
- `tapeCode`가 없으면 방송테이프 제작이 필요

---

### 3.3 추천 근거 (`reasoning`)

**⚠️ 변경사항:** `reasoning`은 이제 단순 문자열입니다 (이전의 `reasoning.summary` 제거)

| 필드명 | 타입 | 설명 | 예시 |
|--------|--------|------|------|
| `reasoning` | 문자열 | AI가 배치로 생성한 추천 근거 (100자 이내) | `"쿠쿠 10인용 밥솥은 대가족을 위한 최적의 선택으로, 저녁 시간대에 2581만원의 매출이 예상됩니다."` |

**💡 추천 근거 특징:**
- **LLM 배치 처리**: 10개 상품의 근거를 한 번에 생성하여 속도 개선
- **독창적 표현**: 각 상품마다 완전히 다른 관점과 표현 사용
- **구체적 수치**: 예측 매출, 카테고리 특성 등 데이터 기반
- **시간대 고려**: 방송 시간대에 적합한지 AI가 판단하여 반영

---

### 3.4 비즈니스 지표 (`businessMetrics`)

#### 3.4.1 AI 예측 매출

| 필드명 | 한글명 | 설명 | 예시 |
|--------|--------|------|------|
| `aiPredictedSales` | AI 예측 매출 | XGBoost 모델이 예측한 매출액 | `"850.0만원"` |

**💡 해석 방법:**
- XGBoost AI 모델이 과거 방송 데이터를 학습하여 예측한 값
- 실제 매출과 차이가 있을 수 있으며, 참고 지표로 활용
- 높을수록 수익성이 좋을 것으로 예상

---

#### 3.4.2 최근 방송 실적 (`lastBroadcast`)

**⚠️ 주의:** 이 필드는 해당 상품(방송테이프)의 최근 방송 이력이 있을 때만 표시됩니다.

| 필드명 | 한글명 | 설명 | 단위 |
|--------|--------|------|------|
| `broadcastStartTime` | 방송 시작 일시 | 가장 최근 방송한 날짜와 시간 | ISO 8601 형식 |
| `orderQuantity` | 주문 수량 | 실제 주문된 개수 | 개 |
| `totalProfit` | 매출총이익 | 실제 발생한 매출 이익 | 원 |
| `profitEfficiency` | ONAIR 매출총이익 (효율) | 방송 시간 대비 효율성 지표 | - |
| `conversionWorth` | 환산가치값 (분리송출) | 분리송출 환산 가치 | - |
| `conversionRate` | 적용 전환율 | 시청자 → 구매자 전환율 | % |
| `realFee` | 실질 수수료 | 실제 적용된 수수료 | - |
| `mixFee` | 혼합 수수료 | 혼합 수수료 | - |

**💡 활용 방법:**
- **AI 예측 vs 실제 실적 비교**: AI 예측 매출과 `totalProfit`을 비교하여 AI 정확도 확인
- **재방송 판단**: 최근 실적이 좋았다면 재방송 고려
- **전환율 분석**: `conversionRate`가 높으면 시청자의 구매 의향이 높았던 상품

**예시:**
```json
{
  "aiPredictedSales": "850.0만원",
  "lastBroadcast": {
    "broadcastStartTime": "2025-10-15T22:00:00+09:00",
    "orderQuantity": 1250,
    "totalProfit": 8500000,
    "profitEfficiency": 0.85,
    "conversionWorth": 12000000,
    "conversionRate": 3.5,
    "realFee": 0.15,
    "mixFee": 0.12
  }
}
```

---

## 4. 통합 편성 상품 설명 (`competitorProducts`)

**⚠️ 중요 변경사항:**
- 이전의 `naverProducts` 필드는 제거되었습니다
- `competitorProducts`에 **네이버 인기 상품 + 타사 편성**이 AI 선택으로 통합되어 10개가 제공됩니다
- AI가 5:5 비율을 유지하려 하며, 한쪽이 부족하면 다른쪽으로 채웁니다

### 4.1 통합 편성의 의미

AI가 다음 두 가지 소스를 분석하여 방송 시간대에 최적화된 10개를 선택합니다:

1. **네이버 인기 상품** (현재 시장 트렌드)
   - 시간대와 무관하게 현재 인기 있는 상품
   - 시장 수요를 반영한 참고 자료

2. **타사 편성 상품** (시간대별 경쟁사 전략)
   - 해당 방송 시간 ±1-2시간 내 타사 편성
   - 실제 경쟁 상황 파악

### 4.2 주요 필드

| 필드명 | 한글명 | 설명 | 예시 |
|--------|--------|------|------|
| `company_name` | 회사명 | 출처 (네이버 또는 타사명) | `"네이버 스토어"`, `"GS홈쇼핑"` |
| `broadcast_title` | 방송/상품명 | 상품 또는 방송 제목 | `"무선 이어폰 블루투스 5.0"` |
| `start_time` | 시작 시간 | 방송 시작 시간 (타사만) | `"2025-11-19T20:00:00+09:00"` |
| `end_time` | 종료 시간 | 방송 종료 시간 (타사만) | `"2025-11-19T21:00:00+09:00"` |
| `duration_minutes` | 방송 시간 | 방송 길이 (분, 타사만) | `60` |
| `category_main` | 카테고리 | 상품 대분류 | `"생활가전"` |

**💡 네이버 상품 구분:**
- `company_name`이 `"네이버 스토어"`인 경우 네이버 인기 상품
- `start_time`, `end_time`, `duration_minutes`는 빈 값 (null)

**💡 타사 편성 구분:**
- `company_name`이 실제 홈쇼핑사명 (GS, 롯데, 현대 등)
- 시간 정보가 모두 포함됨

### 4.3 AI 선택 기준

AI는 다음을 고려하여 10개를 선택합니다:
- **네이버:타사 = 5:5 비율 유지** (가능한 경우)
- **방송 시간대 적합성** (시간대별 상품 특성)
- **카테고리 다양성** (중복 방지)
- **트렌드 반영** (네이버 인기도, 타사 편성 빈도)

### 4.4 활용 방법

**네이버 상품 활용:**
- 현재 시장에서 인기 있는 상품 트렌드 파악
- 유사 카테고리 자사 상품 편성 시 참고

**타사 편성 활용:**
- 경쟁사의 시간대별 전략 분석
- 중복 편성 회피 또는 경쟁 전략 수립
- 시간대별 경쟁 강도 파악

---

## 6. 실제 응답 예시

### 6.1 간단한 예시

```json
{
  "requestTime": "2025-11-11T22:00:00+09:00",
  "recommendations": [
    {
      "rank": 1,
      "productInfo": {
        "productId": "11388995",
        "productName": "프리미엄 다이어트 보조제",
        "category": "건강식품",
        "brand": "헬스케어",
        "price": 99000,
        "tapeCode": "T001",
        "tapeName": "프리미엄 다이어트 보조제 방송테이프"
      },
      "reasoning": "프리미엄 다이어트 보조제는 건강식품 카테고리에서 850만원의 매출이 예상되며, 저녁 시간대 건강 관심층을 타겟합니다.",
      "businessMetrics": {
        "aiPredictedSales": "850.0만원",
        "lastBroadcast": {
          "broadcastStartTime": "2025-10-15T22:00:00+09:00",
          "orderQuantity": 1250,
          "totalProfit": 8500000,
          "profitEfficiency": 0.85,
          "conversionWorth": 12000000,
          "conversionRate": 3.5,
          "realFee": 0.15,
          "mixFee": 0.12
        }
      }
    }
  ],
  "competitorProducts": [
    {
      "company_name": "네이버 스토어",
      "broadcast_title": "무선 이어폰 블루투스 5.0",
      "start_time": null,
      "end_time": null,
      "duration_minutes": null,
      "category_main": "가전디지털"
    },
    {
      "company_name": "GS홈쇼핑",
      "broadcast_title": "프리미엄 건강식품 세트",
      "start_time": "2025-11-19T20:00:00+09:00",
      "end_time": "2025-11-19T21:00:00+09:00",
      "duration_minutes": 60,
      "category_main": "건강식품"
    }
  ]
}
```

---

## 7. 자주 묻는 질문 (FAQ)

### Q1. AI 예측 매출은 얼마나 정확한가요?
- XGBoost 모델이 과거 방송 데이터를 학습하여 예측한 값입니다.
- 실제 매출과 차이가 있을 수 있으며, **참고 지표**로 활용하시기 바랍니다.
- `lastBroadcast` 데이터가 있다면 AI 예측과 실제 매출을 비교해볼 수 있습니다.

### Q2. `lastBroadcast`가 없는 상품은 무엇인가요?
- 해당 상품(방송테이프)의 최근 방송 이력이 없는 경우입니다.
- 신규 상품이거나 오랜 기간 방송하지 않은 상품일 수 있습니다.

### Q3. competitorProducts의 네이버 상품과 타사 편성을 어떻게 구분하나요?
- `company_name`이 `"네이버 스토어"`이면 네이버 인기 상품입니다.
- `company_name`이 실제 홈쇼핑사명이면 타사 편성입니다.
- 네이버 상품은 `start_time`, `end_time`, `duration_minutes`가 null입니다.

### Q4. 가중치를 어떻게 설정해야 하나요?
- **트렌드 중심 (0.7 / 0.3)**: 화제성, 시의성이 중요한 시간대
- **매출 중심 (0.3 / 0.7)**: 안정적인 수익이 중요한 시간대
- **균형 (0.5 / 0.5)**: 트렌드와 매출을 모두 고려

### Q5. 추천 개수는 몇 개가 적당한가요?
- 기본값은 10개이며, 1~20개 사이에서 설정 가능합니다.
- 방송 시간대의 공백 슬롯 개수에 맞춰 설정하시면 됩니다.

### Q6. AI가 추천 근거를 어떻게 생성하나요?
- LLM 배치 처리로 10개 상품의 근거를 한 번에 생성합니다.
- 각 상품마다 예측 매출, 카테고리, 시간대 등을 고려하여 독창적인 문장을 만듭니다.
- 기술 용어(유사도, 점수 등)는 사용하지 않고 현업이 이해하기 쉬운 표현을 사용합니다.

---

## 8. 문의 및 지원

API 사용 중 문의사항이 있으시면 개발팀에 연락 주시기 바랍니다.

- 📧 이메일: [개발팀 이메일]
- 📞 전화: [개발팀 전화번호]
- 📁 기술 문서: `/docs/FRONTEND_API_GUIDE.md` (개발자용)
